<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="pairplot">
<title>Diagonal • pairplot</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Diagonal">
<meta property="og:description" content="pairplot">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">pairplot</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/pairplot.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/composing.html">Composing</a>
    <a class="dropdown-item" href="../articles/diagonal.html">Diagonal</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="diagonal_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Diagonal</h1>
            
      
      
      <div class="d-none name"><code>diagonal.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="histogram">Histogram<a class="anchor" aria-label="anchor" href="#histogram"></a>
</h2>
<p><code>pairplot</code> assumes that function passed to the three parts; diagonal, lower corner, upper corner eventual transformations do not affect the window differently, i.e the transformations do not create discrepancies of maximum and minimum value of transformed data across zones.</p>
<p>However, in some cases you may want to apply a transformation on the corners but not on the diagonal.</p>
<p>An example, would be rank transformation. Plotting an histogram of ranked transform data is not insightful, however plotting ranked transform data on corner plot can give an idea of monotonic degree between two variable rank, and thus gives insight whether two measures produce similar same ranking (visual analog to Spearman correlation). Plotting the histogram of the non-ranked transform data is also useful for having an idea of distribution of the data. One strategy, would be to feed the geom object to one of the corner with a custom stat which computes the rank of y-axis and x-axis. And map to the diagonal a histogram which operates directly on the original data. If there are 300 data points, the ranked data would lie in these boundaries and the corresponding plot grid boundaries of such data would be set to 0 and 300. <code>pairplot</code> corners have priority over diagonal for setting scale limits. Therefore, if the diagonal histogram operates on the 300 untransformed point values, with values lying between 0 and 1, the displayed histogram would be nearly not visible. As a result the diagonal mapped function has to consider its surrounding and has to be scaled to the upper and lower bounds of the near subplots.</p>
<p>Rather than trying to implement an automatic upper and lower bound detector function within internal function <code>mapplot</code>. I made the choice to let the user control. Diagonal functions can access surrounding subplot data. By adding <code>diag_neighbour=c("t", "b", "l", "r")</code> to <code>pairgrid</code>. The selected neighbour data will then be passed to the <code>map_diag</code> call under the form of a list: <code>list(t=&lt;ggplot_built&gt;, b=&lt;ggplot_built, ...)</code> Returning to the example, we can leverage this argument in the function we pass to <code>map_diag</code> and set the histogram min-max scaling based on neighbour limits. This is already implemented in <code>pair_grid_geom</code>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">pairplot</span><span class="op">)</span></span>
<span><span class="va">pair_geom_histogram</span></span>
<span><span class="co">#&gt; function (data, mapping, neighbour_ggdata = NULL, unit_y = FALSE, </span></span>
<span><span class="co">#&gt;     stat = "bin", bins = 10, binwidth = function(x) {</span></span>
<span><span class="co">#&gt;         bin_width_auto(x, na.rm = TRUE)</span></span>
<span><span class="co">#&gt;     }, ...) </span></span>
<span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt;     bin_width_value &lt;- binwidth(data[[1]])</span></span>
<span><span class="co">#&gt;     if (unit_y) {</span></span>
<span><span class="co">#&gt;         p &lt;- ggplot(data = data, mapping = mapping) + geom_histogram(aes(y = ..ncount..), </span></span>
<span><span class="co">#&gt;             stat = stat, bins = bins, binwidth = binwidth, ...)</span></span>
<span><span class="co">#&gt;     }</span></span>
<span><span class="co">#&gt;     else {</span></span>
<span><span class="co">#&gt;         if (length(neighbour_ggdata)) {</span></span>
<span><span class="co">#&gt;             for (key in c("t", "b")) {</span></span>
<span><span class="co">#&gt;                 xdata = neighbour_ggdata[[key]]</span></span>
<span><span class="co">#&gt;                 if (length(xdata)) {</span></span>
<span><span class="co">#&gt;                   break</span></span>
<span><span class="co">#&gt;                 }</span></span>
<span><span class="co">#&gt;             }</span></span>
<span><span class="co">#&gt;             for (key in c("l", "r")) {</span></span>
<span><span class="co">#&gt;                 ydata = neighbour_ggdata[[key]]</span></span>
<span><span class="co">#&gt;                 if (length(ydata)) {</span></span>
<span><span class="co">#&gt;                   break</span></span>
<span><span class="co">#&gt;                 }</span></span>
<span><span class="co">#&gt;             }</span></span>
<span><span class="co">#&gt;             xaxis_bounds &lt;- xdata$layout$panel_scales_x[[1]]$range$range</span></span>
<span><span class="co">#&gt;             yaxis_bounds &lt;- ydata$layout$panel_scales_y[[1]]$range$range</span></span>
<span><span class="co">#&gt;             lower_bound_y &lt;- yaxis_bounds[1]</span></span>
<span><span class="co">#&gt;             upper_bound_y &lt;- yaxis_bounds[2]</span></span>
<span><span class="co">#&gt;             lower_bound_x = xaxis_bounds[1]</span></span>
<span><span class="co">#&gt;             upper_bound_x = xaxis_bounds[2]</span></span>
<span><span class="co">#&gt;             x = rlang::as_name(mapping$x)</span></span>
<span><span class="co">#&gt;             t_data = min_max_scale(data[x], lower_bound_x, upper_bound_x)</span></span>
<span><span class="co">#&gt;             p &lt;- ggplot(data = t_data, mapping = mapping)</span></span>
<span><span class="co">#&gt;         }</span></span>
<span><span class="co">#&gt;         else {</span></span>
<span><span class="co">#&gt;             p &lt;- ggplot(data = data, mapping = mapping)</span></span>
<span><span class="co">#&gt;             upper_bound_y &lt;- max(data[rlang::as_name(mapping$x)])</span></span>
<span><span class="co">#&gt;             lower_bound_y &lt;- min(data[rlang::as_name(mapping$x)])</span></span>
<span><span class="co">#&gt;         }</span></span>
<span><span class="co">#&gt;         p &lt;- p + geom_histogram(aes(y = after_stat((upper_bound_y - </span></span>
<span><span class="co">#&gt;             lower_bound_y) * ((count - min(count))/(max(count) - </span></span>
<span><span class="co">#&gt;             min(count))) + lower_bound_y)), stat = stat, bins = bins, </span></span>
<span><span class="co">#&gt;             binwidth = binwidth, ...)</span></span>
<span><span class="co">#&gt;     }</span></span>
<span><span class="co">#&gt;     return(p)</span></span>
<span><span class="co">#&gt; }</span></span>
<span><span class="co">#&gt; &lt;bytecode: 0x55df2323a990&gt;</span></span>
<span><span class="co">#&gt; &lt;environment: namespace:pairplot&gt;</span></span></code></pre></div>
<p>Now, let’s see what happens when we do not use this feature. We compute the scatter and geom smooth of rank transformed variable. We use internal functions <code>geom_point_rank()</code> &amp; <code>geom_smooth_rank()</code> to compute the lower corner plots.</p>
<p>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="va">penguins_url</span> <span class="op">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/allisonhorst/palmerpenguins/main/inst/extdata/penguins.csv"</span></span>
<span><span class="va">columns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bill_length_mm"</span>, <span class="st">"bill_depth_mm"</span>, <span class="st">"flipper_length_mm"</span>, <span class="st">"body_mass_g"</span><span class="op">)</span></span>
<span><span class="va">penguins</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">penguins_url</span><span class="op">)</span><span class="op">[</span><span class="va">columns</span><span class="op">]</span></span>
<span><span class="va">penguins</span> <span class="op">&lt;-</span> <span class="va">penguins</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">penguins</span><span class="op">)</span>, <span class="fl">1</span>, <span class="va">any</span><span class="op">)</span>, <span class="op">]</span> <span class="co"># dropping NA</span></span>
<span></span>
<span><span class="va">pair_geom_rank_smooth</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">mapping</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span>, mapping <span class="op">=</span> <span class="va">mapping</span><span class="op">)</span> <span class="op">+</span> </span>
<span>      <span class="fu">geom_point_rank</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>      <span class="fu">geom_smooth_rank</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">pair_geom_rank_smooth</span><span class="op">(</span><span class="va">penguins</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">flipper_length_mm</span>, y<span class="op">=</span><span class="va">body_mass_g</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span></code></pre></div>
<p><img src="diagonal_files/figure-html/unnamed-chunk-3-1.png" width="672"></p>
<p>On the pairgrid down below we see that histogram are not in proportion.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pairgrid.html">pairgrid</a></span><span class="op">(</span></span>
<span>         <span class="va">penguins</span>,</span>
<span>         map_lower<span class="op">=</span><span class="va">pair_geom_rank_smooth</span>,</span>
<span>         map_diag<span class="op">=</span><span class="va">pair_geom_histogram</span>,</span>
<span>         map_upper<span class="op">=</span><span class="cn">NULL</span>,</span>
<span>         diag_share_lim<span class="op">=</span><span class="cn">T</span>, repeat_text<span class="op">=</span><span class="cn">T</span>,</span>
<span>         common_ylim<span class="op">=</span><span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">y</span><span class="op">)</span><span class="op">{</span><span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rank.html" class="external-link">rank</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span><span class="va">y</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rank.html" class="external-link">rank</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span><span class="va">y</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">}</span>,</span>
<span>         common_xlim<span class="op">=</span><span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">x</span><span class="op">)</span><span class="op">{</span><span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rank.html" class="external-link">rank</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span><span class="va">x</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rank.html" class="external-link">rank</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span><span class="va">x</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">}</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span></code></pre></div>
<p><img src="diagonal_files/figure-html/unnamed-chunk-4-1.png" width="672"></p>
<p>Down below, we leverage the surrounding information and min max scale the data on the x-axis and y-axis with respect to surroundings.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/pairgrid.html">pairgrid</a></span><span class="op">(</span></span>
<span>         <span class="va">penguins</span>,</span>
<span>         map_lower<span class="op">=</span><span class="va">pair_geom_rank_smooth</span>,</span>
<span>         map_diag<span class="op">=</span><span class="va">pair_geom_histogram</span>,</span>
<span>         map_upper<span class="op">=</span><span class="va">pair_geom_rank_smooth</span>,</span>
<span>         diag_share_lim<span class="op">=</span><span class="cn">T</span>, repeat_text<span class="op">=</span><span class="cn">T</span>,</span>
<span>         common_xlim<span class="op">=</span><span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">x</span><span class="op">)</span><span class="op">{</span></span>
<span>           <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rank.html" class="external-link">rank</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span><span class="va">x</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rank.html" class="external-link">rank</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span><span class="va">x</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>         <span class="op">}</span>,</span>
<span>         common_ylim<span class="op">=</span><span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">y</span><span class="op">)</span><span class="op">{</span></span>
<span>           <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rank.html" class="external-link">rank</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span><span class="va">y</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rank.html" class="external-link">rank</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span><span class="va">y</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>         <span class="op">}</span>,</span>
<span>         diag_neighbour<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"l"</span>, <span class="st">"b"</span>, <span class="st">"t"</span>, <span class="st">"r"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span></code></pre></div>
<p><img src="diagonal_files/figure-html/unnamed-chunk-5-1.png" width="672"></p>
<p>The down-side of the double min max scaling is interpretation which can be misleading. A note might be useful:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pairgrid.html">pairgrid</a></span><span class="op">(</span></span>
<span>         <span class="va">penguins</span>,</span>
<span>         map_lower<span class="op">=</span><span class="va">pair_geom_rank_smooth</span>,</span>
<span>         map_diag<span class="op">=</span><span class="va">pair_geom_histogram</span>,</span>
<span>         map_upper<span class="op">=</span><span class="va">pair_geom_rank_smooth</span>,</span>
<span>         common_xlim<span class="op">=</span><span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">x</span><span class="op">)</span><span class="op">{</span></span>
<span>           <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rank.html" class="external-link">rank</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span><span class="va">x</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rank.html" class="external-link">rank</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span><span class="va">x</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>         <span class="op">}</span>,</span>
<span>         common_ylim<span class="op">=</span><span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">y</span><span class="op">)</span><span class="op">{</span></span>
<span>           <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rank.html" class="external-link">rank</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span><span class="va">y</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rank.html" class="external-link">rank</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span><span class="va">y</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>         <span class="op">}</span>,</span>
<span>         diag_neighbour<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"l"</span>, <span class="st">"b"</span>, <span class="st">"t"</span>, <span class="st">"r"</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">+</span> <span class="fu">patchwork</span><span class="fu">::</span><span class="fu"><a href="https://patchwork.data-imaginist.com/reference/plot_annotation.html" class="external-link">plot_annotation</a></span><span class="op">(</span>caption<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span><span class="st">"Histograms' x and y axis were rescaled with respect to the surrounding plots' y and x limits"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span></code></pre></div>
<p><img src="diagonal_files/figure-html/unnamed-chunk-6-1.png" width="672"></p>
<p>Another option for visualizing this kind of data without min max scaling is to allow misalignment of limits on diagonal only and display the text on the diagonal and border contigous subplots. Four arguments have to be specified, <code>common_xlim=&lt;func&gt;</code>, <code>common_ylim=&lt;func&gt;</code>, <code>diag_share_lim=FALSE</code>, <code>text_on_diag=TRUE</code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pairgrid.html">pairgrid</a></span><span class="op">(</span></span>
<span>         <span class="va">penguins</span>,</span>
<span>         map_lower<span class="op">=</span><span class="va">pair_geom_rank_smooth</span>,</span>
<span>         map_diag<span class="op">=</span><span class="va">pair_geom_histogram</span>,</span>
<span>         map_upper<span class="op">=</span><span class="va">pair_geom_rank_smooth</span>,</span>
<span>         common_xlim<span class="op">=</span><span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">x</span><span class="op">)</span><span class="op">{</span></span>
<span>           <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rank.html" class="external-link">rank</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span><span class="va">x</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rank.html" class="external-link">rank</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span><span class="va">x</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>         <span class="op">}</span>,</span>
<span>         common_ylim<span class="op">=</span><span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">y</span><span class="op">)</span><span class="op">{</span></span>
<span>           <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rank.html" class="external-link">rank</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span><span class="va">y</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rank.html" class="external-link">rank</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span><span class="va">y</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>         <span class="op">}</span>, diag_share_lim<span class="op">=</span><span class="cn">FALSE</span>, </span>
<span>         text_on_diag<span class="op">=</span><span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; Ignoring unknown parameters: unit_y</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span></span></code></pre></div>
<p><img src="diagonal_files/figure-html/unnamed-chunk-7-1.png" width="672"></p>
</div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Alexandre Sonderegger.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
